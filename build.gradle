import static org.gradle.api.JavaVersion.VERSION_17

plugins {
	id "java"
	id "org.springframework.boot" version "${springBootVersion}"
	id "io.spring.dependency-management" version "${springDependencyManagementVersion}"
}

group = "${groupName}"
version = "$appVersion"

java {
	sourceCompatibility = VERSION_17
}

configurations {
	compileOnly {
		extendsFrom annotationProcessor
	}
}

repositories {
	mavenCentral()
}

dependencies {
	implementation "org.springframework.boot:spring-boot-starter-webflux"
	implementation "org.springframework.boot:spring-boot-starter-data-r2dbc"
	runtimeOnly "org.postgresql:r2dbc-postgresql"
	runtimeOnly "org.postgresql:postgresql"
	implementation 'org.liquibase:liquibase-core'
	compileOnly "org.projectlombok:lombok"
	annotationProcessor "org.projectlombok:lombok"
	testImplementation "io.projectreactor:reactor-test"
	testImplementation "org.springframework.boot:spring-boot-starter-test"
}

tasks.named("bootBuildImage") {
	builder = "paketobuildpacks/builder-jammy-base:latest"
}

tasks.named("test") {
	useJUnitPlatform()
}